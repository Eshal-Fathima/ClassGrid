<%- include('partials/header', {
  title: 'Mark Attendance',
  profile,
  page: 'attendance'
}) %>

<section class="card">
  <h1>Mark Attendance</h1>

  <form method="post" action="/attendance" class="form form-inline">
    <div class="field">
      <label for="date">Date</label>
      <input type="date" id="date" name="date" required>
    </div>

    <div class="field">
      <label for="subject_id">Subject</label>
      <select id="subject_id" name="subject_id" required>
        <option value="">— Select —</option>
        <% if (subjects && subjects.length) { %>
          <% subjects.forEach(function(s) { %>
            <option value="<%= s.id %>"><%= s.name %></option>
          <% }) %>
        <% } %>
      </select>
    </div>

    <div class="field">
      <label for="status">Status</label>
      <select id="status" name="status" required>
        <option value="attended">Attended</option>
        <option value="missed">Missed</option>
        <option value="holiday">College Holiday</option>
        <option value="exam">Exam</option>
      </select>
    </div>

    <button type="submit" class="btn">Save</button>
  </form>
</section>

<section class="card">
  <h2>Recent Entries</h2>

  <% if (recent && recent.length) { %>
    <div class="table-scroll">
      <table class="grid">
        <thead>
          <tr>
            <th>Date</th>
            <th>Subject</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <% recent.forEach(function(r) { %>
            <tr>
              <td><%= r.date %></td>
              <td><%= r.name %></td>
              <td><%= r.status %></td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>
  <% } else { %>
    <p class="muted">No attendance entries yet.</p>
  <% } %>
</section>

<%- include('partials/footer') %>
